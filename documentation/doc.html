<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=yes"
    />
    <title>DeAd Documentation</title>
    <link rel="stylesheet" href="docstyle.css" />
  </head>

  <body prefix="schema: http://schema.org">
    <header>
      <div class="banner">
        <img
          src="scholarly-html.svg"
          width="227"
          height="50"
          alt="Scholarly HTML logo"
        />
        <div class="status">Community Draft</div>
      </div>
      <h1>Detention Admin</h1>
    </header>
    <div role="contentinfo">
      <dl>
        <dt>Authors</dt>
        <dd>
          Rusu Andrei-Dudu (<a href="https://github.com/D1n03">@D1n03</a>),
          Zloteanu Mircea (<a href="https://github.com/zmirch">@zmirch</a>)
        </dd>
        <dt>License</dt>
        <dd>
          <p>
            Built under MIT License Copyright &copy; 2024. All copyrights
            reserved.
          </p>
          <p>
            Permission is hereby granted, free of charge, to any person
            obtaining a copy of this software and associated documentation files
            (the "Software"), to deal in the Software without restriction,
            including without limitation the rights to use, copy, modify, merge,
            publish, distribute, sublicense, and/or sell copies of the Software,
            and to permit persons to whom the Software is furnished to do so,
            subject to the following conditions:
          </p>
          <ul>
            <li>
              <p>
                The above copyright notice and this permission notice shall be
                included in all copies or substantial portions of the Software.
              </p>
            </li>
            <li>
              <p>
                THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
                EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
                OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
                NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
                HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
                WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
                FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
                OTHER DEALINGS IN THE SOFTWARE.
              </p>
            </li>
          </ul>
        </dd>
      </dl>
    </div>
    <section typeof="sa:Abstract" id="abstract" role="doc-abstract">
      <h2>Abstract</h2>
      <p>
        DeAd (Detention Administration) is a web application designed to
        facilitate the management of visitation schedules for individuals
        incarcerated in a prison. This document outlines the functionality of
        DeAd and its underlying encoding mechanisms.
      </p>
    </section>
    <section id="introduction" role="doc-introduction">
      <h2>Introduction</h2>
      <p>
        DeAd (Detention Admin) is a web app crafted to oversee visits for
        incarcerated individuals, aiming to streamline the visitation process
        efficiently while maintaining reliability in recording crucial visit
        details.
      </p>
      <p>
        The app will capture visitor information, including identity, photo,
        relationship with the inmate (relative, friend, lawyer), and visit
        purpose. Additionally, it will log meeting date, nature, duration, items
        provided to the inmate, and other pertinent data.
      </p>
      <p>
        DeAd's main goal is to ensure precise and secure visit records within
        prisons, benefiting staff, inmates, and visitors alike. It offers a
        simplified process for visit booking, modifications, and cancellations,
        minimizing errors or misunderstandings.
      </p>
      <p>
        This documentation provides a comprehensive overview of DeAd's features
        and functionalities, along with system requirements and user
        instructions. It also details security measures safeguarding sensitive
        information, prioritizing privacy and confidentiality.
      </p>
      <p>
        To encapsulate, DeAd presents a user-friendly solution for effectively
        managing prison visits, thereby enhancing efficiency and reliability for
        all pertinent stakeholders.
      </p>
    </section>
    <section id="structure">
      <h2>Structure</h2>
      <p>
        The DeAd application consists of fourteen web pages, adhering to
        specific methodologies for structuring web applications. With a logical
        and well-designed architecture, the application provides clear and
        user-friendly features for all users. The subsequent lines will
        delineate the architecture of each page.
      </p>
      <p>The application pages share the same header structured as follows:</p>
      <section class="component-1">
        <h3>The header</h3>
        <p>
          The application header comprises a single area, with the navigation
          bar positioned on the right side. This navigation bar facilitates
          access to the home, about, help, and contact pages.
        </p>
        <figure type="sa:image">
          <img src="images/header.png" alt="header-img" />
          <figcaption>Header of the app</figcaption>
        </figure>
        <figure type="sa:image">
          <img src="images/profilemenu.png" alt="profilemenu-img" />
          <figcaption>Profile Menu</figcaption>
        </figure>
        <p>
          For the profile menu to appear, the user must be logged into their
          account. If not, we only display in the header an icon for this.
        </p>
        <p>
          Additionally, to display the profile menu, we check if the user is
          logged in by verifying the session variable "is_logged_in." If the
          user is logged in, we display their account name along with the
          profile picture, if one is set. The profile picture is also retrieved
          from the session variable "photo."
        </p>
        <p>
          For the logout functionality, the Logout endpoint allows users to
          terminate their session and log out from the system. It handles POST
          requests to invalidate the authentication token associated with the
          user session.
        </p>
        <ol>
          <li>
            <strong>Request Handling:</strong>
            <ul>
              <li>
                Accepts only POST requests. Other methods result in a 405 Method
                Not Allowed response.
              </li>
              <li>
                Validates any existing authentication token to ensure that the
                user is logged in before logging out.
              </li>
            </ul>
          </li>
          <li>
            <strong>Session Termination:</strong>
            <ul>
              <li>
                Destroys the user session by unsetting session variables and
                destroying the session.
              </li>
              <li>
                Clears the authentication token cookie by setting its expiration
                time to a past value.
              </li>
            </ul>
          </li>
          <li>
            <strong>Response Handling:</strong>
            <ul>
              <li>
                Returns a success message with status code 200 if the user is
                logged out successfully.
              </li>
              <li>
                Returns a 401 Unauthorized error if no authentication token is
                found, indicating that the user is not logged in.
              </li>
              <li>
                Returns a 405 Method Not Allowed error for requests using
                unsupported HTTP methods.
              </li>
            </ul>
          </li>
        </ol>
      </section>
      <section id="component-2">
        <h3>The <code>Index</code> page</h3>
        <p>
          The primary page of the application comprises a solitary "first"
          section. The central element within this section is the button
          designated for scheduling a visit. If the user is logged, based on his
          function, the user will be redirected to the Vistor Main or Admin Main
          page.
        </p>
        <figure type="sa:image">
          <img src="images/index.png" alt="index-img" />
          <figcaption>Main page</figcaption>
        </figure>
        <p>
          Depending on the role of the logged-in user, the button redirects them
          to the appropriate main page. If the user is a regular user, they are
          redirected to the visitor main page. If the user is an admin, they are
          redirected to the admin main page. This is determined by checking the
          session variable "function."
        </p>
      </section>
      <section id="component-3">
        <h3>The <code>Login</code> page</h3>
        <p>
          To schedule a visit, users must log in to their account in our
          database. This leads to the "Login" page, featuring a bordered box
          containing two fields. If a user already possesses an account, they
          will input their email address and password, then click the "Log in"
          button on the bottom. Conversely, if a user lacks an account, they
          should press the "Sign up" button at the bottom to create one. Lastly,
          there is a section dedicated in case a user forgot the password of the
          account.
        </p>
        <figure type="sa:image">
          <img src="images/login.png" alt="login-img" />
          <figcaption>Login Form</figcaption>
        </figure>
        <p>
          For this page, the login endpoint is used. The Login endpoint allows
          users to log in and obtain an authentication token (JWT) for accessing
          protected resources within the system. It handles POST requests to
          authenticate users based on their email and password.
        </p>
        <ol>
          <li>
            <strong>Request Handling:</strong>
            <ul>
              <li>
                Accepts only POST requests. Other methods result in a 405 Method
                Not Allowed response.
              </li>
            </ul>
          </li>
          <li>
            <strong>User Authentication:</strong>
            <ul>
              <li>
                Retrieves user input (email and password) from the request body.
              </li>
              <li>
                Validates the provided email and password against records in the
                database.
              </li>
              <li>
                If the provided credentials are valid, it creates a session for
                the user, generates a JWT token, and sets it as a cookie.
              </li>
            </ul>
          </li>
          <li>
            <strong>JWT Creation:</strong>
            <ul>
              <li>
                Generates a JWT token containing user information and role
                (admin or user) with a specified expiration time.
              </li>
              <li>
                The token is signed using the secret key defined in the
                configuration.
              </li>
            </ul>
          </li>
          <li>
            <strong>Session Management:</strong>
            <ul>
              <li>
                Creates a session for the authenticated user, storing essential
                user details in session variables.
              </li>
              <li>
                If authentication fails, it responds with a 401 Unauthorized
                error.
              </li>
            </ul>
          </li>
          <li>
            <strong>Response Handling:</strong>
            <ul>
              <li>
                Returns a JSON response with the user's role if authentication
                is successful.
              </li>
              <li>
                Returns a 401 Unauthorized error if the provided credentials are
                invalid.
              </li>
              <li>
                Returns a 500 Internal Server Error if there is an issue with
                the database connection or processing the request.
              </li>
              <li>
                Returns a 405 Method Not Allowed error for requests using
                unsupported HTTP methods.
              </li>
            </ul>
          </li>
        </ol>
      </section>
      <section id="component-4">
        <h3>The <code>Signup</code> page</h3>
        <p>
          The Signup page serves as a registration form for new users to create
          an account on the website. It includes fields for inputting the user's
          first name, last name, email address, password, and password
          confirmation. The user is required to enter their information
          accurately to proceed with the sign-up process. Additionally, there is
          a button labeled "Sign up" at the bottom of the form, which the user
          can click to submit their details and complete the registration
          process.
        </p>
        <figure type="sa:image">
          <img src="images/signup.png" alt="signup-img" />
          <figcaption>Signup Form</figcaption>
        </figure>
        <p>
          The Signup endpoint facilitates the creation of new user accounts
          within the system. Here's an overview of its functionality:
        </p>
        <ol>
          <li>
            <strong>Request Handling:</strong>
            <ul>
              <li>
                Accepts only POST requests. Any other method results in a 405
                Method Not Allowed response.
              </li>
            </ul>
          </li>
          <li>
            <strong>User Registration:</strong>
            <ul>
              <li>
                Retrieves user registration data (first name, last name, email,
                password, password confirmation) from the request body.
              </li>
              <li>
                Validates the presence of all required fields and checks the
                validity of the email format.
              </li>
              <li>
                Verifies that the password and password confirmation match and
                meet the required complexity criteria (at least 8 characters,
                containing uppercase, lowercase, and numeric characters).
              </li>
              <li>
                Determines the user's role based on the email domain. Users with
                specific domains (mapn.com, mai.com, gov.com) are assigned the
                admin role; others are assigned the user role.
              </li>
              <li>
                Checks if an account with the provided email already exists in
                the database.
              </li>
              <li>
                If all validations pass, hashes the password using PHP's
                password_hash function and inserts the user data into the
                database.
              </li>
            </ul>
          </li>
          <li>
            <strong>Password Strength Checking:</strong>
            <ul>
              <li>
                Utilizes regular expressions to check if the password meets the
                complexity requirements (uppercase, lowercase, numeric
                characters, and minimum length).
              </li>
            </ul>
          </li>
          <li>
            <strong>Response Handling:</strong>
            <ul>
              <li>
                Sends appropriate HTTP status codes and JSON responses based on
                the outcome of the registration process.
              </li>
              <li>
                The response includes a message indicating the result of the
                operation and, optionally, a boolean flag (success) to indicate
                the success status of the operation.
              </li>
            </ul>
          </li>
        </ol>
      </section>
      <section id="component-5">
        <h3>The <code>Forgot Password</code> page</h3>
        <p>
          The "Forgot Password" page includes a single field for users to enter
          their email address. After pressing the button below, users will
          receive an email with a link. Clicking on this link will redirect them
          to a page with a form to proceed with the password reset.
        </p>
        <figure type="sa:image">
          <img src="images/forgotpassword.png" alt="forgotpassword-img" />
          <figcaption>Forgot Password form</figcaption>
        </figure>
        <p>
          The Forgot Password endpoint handles the process of resetting a user's
          password in case they forget it. Here's a breakdown of its
          functionality:
        </p>
        <ol>
          <li>
            <strong>Request Handling:</strong>
            <ul>
              <li>
                Accepts only POST requests. Any other method results in a 405
                Method Not Allowed response.
              </li>
            </ul>
          </li>
          <li>
            <strong>Reset Password Process:</strong>
            <ul>
              <li>
                Retrieves the email address from the request body and validates
                its format.
              </li>
              <li>
                Queries the database to check if the provided email exists.
              </li>
              <li>
                If the email exists, generates a random reset token, hashes it,
                and updates the user's record in the database with the hashed
                token and its expiration time (30 minutes from the current
                time).
              </li>
              <li>
                Sends a password reset email to the user containing a link with
                the reset token embedded in the URL.
              </li>
            </ul>
          </li>
          <li>
            <strong>Token Generation:</strong>
            <ul>
              <li>
                Generates a random token using random_bytes() function and
                converts it to a hexadecimal string.
              </li>
              <li>Hashes the token using SHA-256 algorithm for security.</li>
            </ul>
          </li>
          <li>
            <strong>Email Sending:</strong>
            <ul>
              <li>
                Composes an email using the PHPMailer library, providing a link
                to reset the password with the generated token appended to the
                URL.
              </li>
              <li>Sends the email to the user's email address.</li>
              <li>
                If the email sending fails, it responds with a 500 Internal
                Server Error.
              </li>
            </ul>
          </li>
          <li>
            <strong>Response Handling:</strong>
            <ul>
              <li>
                Sends appropriate HTTP status codes and JSON responses based on
                the outcome of the reset password process.
              </li>
              <li>
                The response includes a message indicating the result of the
                operation.
              </li>
            </ul>
          </li>
        </ol>
      </section>
      <section id="component-6">
        <h3>The <code>Reset Password</code> page</h3>
        <p>
          On this page, the user can reset the password by entering a new one in
          the two fields provided below. To complete the process, they simply
          need to click the button below.
        </p>
        <figure type="sa:image">
          <img src="images/resetpassword.png" alt="resetpassword-img" />
          <figcaption>Reset password form</figcaption>
        </figure>
      </section>
      <p>
        The page is using two endpoints, one for the reset password and one for
        token validation.
      </p>
      <ol>
        <li>
          <strong>Token Validation:</strong>
          <ul>
            <li>Checks if the reset token is valid and not expired.</li>
          </ul>
        </li>
        <li>
          <strong>Password Validation:</strong>
          <ul>
            <li>
              Ensures the new password meets strength requirements and matches
              the confirmation.
            </li>
          </ul>
        </li>
        <li>
          <strong>Password Update:</strong>
          <ul>
            <li>
              Hashes the new password and updates it in the database, nullifying
              the reset token.
            </li>
          </ul>
        </li>
      </ol>

      <p>
        The Token Validation endpoint validates the password reset token. When a
        GET request is made, it checks if the token is valid and not expired,
        responding accordingly.
      </p>

      <ol>
        <li>
          <strong>Token Check:</strong>
          <ul>
            <li>Ensures the reset token exists and is valid.</li>
          </ul>
        </li>
        <li>
          <strong>Expiration Check:</strong>
          <ul>
            <li>Verifies the token hasn't expired.</li>
          </ul>
        </li>
        <li>
          <strong>Response:</strong>
          <ul>
            <li>
              Returns a validation status message based on the token's validity.
            </li>
          </ul>
        </li>
      </ol>
      <section id="component-7">
        <h3>The <code>About</code> page</h3>
        <p>
          This page provides a concise overview of our platform, highlighting
          its purpose to improve the visitation process for individuals in
          correctional facilities. It emphasizes the platform's features such as
          seamless appointment initiation and adherence to principles of
          security, accessibility, and efficiency. Additionally, it underscores
          the platform's mission to support prisoner rehabilitation by
          facilitating contact with the outside world.
        </p>
        <figure type="sa:image">
          <img src="images/about.png" alt="about-img" />
          <figcaption>About page</figcaption>
        </figure>
      </section>
      <section id="component-8">
        <h3>The <code>Help</code> page</h3>
        <p>
          The purpose of this page is to provide general information about the
          main pages and functionalities within the application, along with
          offering guidance on common user queries such as password recovery and
          visit scheduling.
        </p>
        <figure type="sa:image">
          <img src="images/help.png" alt="help-img" />
          <figcaption>Help page</figcaption>
        </figure>
      </section>
      <section id="component-9">
        <h3>The <code>Contact</code> page</h3>
        <p>
          On this page, users, whether registered or not, can submit suggestions
          or report system issues to administrators. Upon accessing the page,
          users encounter a bordered box containing fields for first name, last
          name, email, and suggestions. Each field must be filled for the form
          to be considered, with the "Suggestions" field requiring concise
          problem or suggestion descriptions. Subsequently, users can submit the
          form by clicking the "Send" button located at the bottom of the
          bordered box.
        </p>
        <figure type="sa:image">
          <img src="images/contact.png" alt="contact-img" />
          <figcaption>Contact form</figcaption>
        </figure>
        <p>
          The Contact endpoint manages the creation of contact feedback entries
          for this page. It handles POST requests to process user-provided
          contact information and store it in the database.
        </p>
        <ol>
          <li>
            <strong>Request Handling:</strong>
            <ul>
              <li>
                Only accepts POST requests. Any other method results in a 405
                Method Not Allowed response.
              </li>
            </ul>
          </li>
          <li>
            <strong>Input Validation:</strong>
            <ul>
              <li>
                Ensures all required fields (name, email, feedback) are provided
                and validates the email format.
              </li>
            </ul>
          </li>
          <li>
            <strong>Database Insertion:</strong>
            <ul>
              <li>
                Inserts the validated contact information into the contact
                table.
              </li>
            </ul>
          </li>
          <li>
            <strong>Response Handling:</strong>
            <ul>
              <li>
                Returns appropriate HTTP status codes and messages based on the
                operation's success or failure.
              </li>
            </ul>
          </li>
        </ol>
      </section>
      <section id="component-10">
        <h3>The <code>Error</code> page</h3>
        <p>
          In case users attempt to access a non-existent page or encounter an
          error, they are directed to this "Page Not Found" error page, which
          provides an apology message and offers a button to navigate back to
          the home page.
        </p>
        <figure type="sa:image">
          <img src="images/error.png" alt="error-img" />
          <figcaption>Error page</figcaption>
        </figure>
      </section>
      <section id="component-11">
        <h3>The <code>Profile</code> page</h3>
        <p>
          In the main content area of this page, there is a section displaying
          the user's profile information, including their name, email address,
          and options to edit their profile, change password or, if they are a
          regular user, view their visit history.
        </p>
        <figure type="sa:image">
          <img src="images/profile.png" alt="profile-img" />
          <figcaption>Profile page</figcaption>
        </figure>
        <p>
          This page checks if the user has a profile picture. If a picture
          exists, it's displayed from the session variable "photo"; otherwise, a
          default one is shown. Additionally, it displays the user's name using
          the "first_name" and "last_name" session variables and their email
          using the session variable "email".
        </p>
      </section>
      <section id="component-12">
        <h3>The <code>Edit Profile</code> page</h3>
        <p>
          On this page, the user can change their first name, last name, email
          and photo.
        </p>
        <figure type="sa:image">
          <img src="images/editprofile.png" alt="profile-img" />
          <figcaption>Edit profile form</figcaption>
        </figure>
        <p>
          The page retrieves the user's first name, last name, and email from
          the session variables "first_name," "last_name," and "email." It
          utilizes the edit profile endpoint to enable users to modify their
          profile details. This endpoint manages POST requests to update profile
          information, including first name, last name, email, and profile
          photo.
        </p>
        <ol>
          <li>
            <strong>Request Handling:</strong>
            <ul>
              <li>
                Only accepts POST requests. Other methods result in a 405 Method
                Not Allowed response.
              </li>
              <li>Validates the user's JWT token to ensure authentication.</li>
            </ul>
          </li>
          <li>
            <strong>Session Validation:</strong>
            <ul>
              <li>
                Validates that the user is logged in by checking the session
                status.
              </li>
            </ul>
          </li>
          <li>
            <strong>Input Validation:</strong>
            <ul>
              <li>
                Checks if all required fields (first name, last name, email) are
                provided. Validates the file type if a profile photo is
                uploaded.
              </li>
            </ul>
          </li>
          <li>
            <strong>Database Operation:</strong>
            <ul>
              <li>Updates the user's profile information in the database.</li>
            </ul>
          </li>
          <li>
            <strong>Session Update:</strong>
            <ul>
              <li>
                Updates the current session data with the new profile
                information.
              </li>
            </ul>
          </li>
          <li>
            <strong>Response Handling:</strong>
            <ul>
              <li>
                Returns appropriate HTTP status codes and messages based on the
                operation's success or failure.
              </li>
            </ul>
          </li>
        </ol>
      </section>
      <section id="component-13">
        <h3>The <code>Change Password</code> page</h3>
        <p>
          To change the account password, the user must fill in the three fields
          below with their current password, the new password, and a
          confirmation of the new password. Note that the new password must meet
          certain criteria before the user can successfully submit the form.
        </p>
        <figure type="sa:image">
          <img src="images/changepassword.png" alt="profile-img" />
          <figcaption>Change password form</figcaption>
        </figure>
        <p>
          The Change Password endpoint manages the password change functionality
          for users. It handles POST requests to update a user's password with a
          new one.
        </p>
        <ol>
          <li>
            <strong>Request Handling:</strong>
            <ul>
              <li>
                Only accepts POST requests. Other methods result in a 405 Method
                Not Allowed response.
              </li>
              <li>Validates the user's JWT token to ensure authentication.</li>
            </ul>
          </li>
          <li>
            <strong>Input Validation:</strong>
            <ul>
              <li>Validates the email format provided in the request.</li>
              <li>
                Checks if the current password matches the one stored in the
                database.
              </li>
              <li>
                Verifies if the new passwords match each other and meet the
                required strength criteria.
              </li>
            </ul>
          </li>
          <li>
            <strong>Password Strength Check:</strong>
            <ul>
              <li>
                Ensures that the new password meets certain strength criteria,
                including containing at least one uppercase letter, one
                lowercase letter, one number, and being at least 8 characters
                long.
              </li>
            </ul>
          </li>
          <li>
            <strong>Database Operation:</strong>
            <ul>
              <li>
                Updates the user's password in the database with the newly
                provided one if all validation checks pass.
              </li>
            </ul>
          </li>
          <li>
            <strong>Response Handling:</strong>
            <ul>
              <li>
                Returns appropriate HTTP status codes and messages based on the
                operation's success or failure.
              </li>
            </ul>
          </li>
        </ol>
      </section>
      <section id="component-14">
        <h3>The <code>Visitor Main</code> page</h3>
        <p>
          The page welcomes the visitor and then presents a menu where the user
          can create a visit, view active visits, or review past visits.
        </p>
        <figure type="sa:image">
          <img src="images/visitormain.png" alt="visitormain-img" />
          <figcaption>User Main Page</figcaption>
        </figure>
        <p>
          Moreover, the page gets the name of the logged user from the session
          variables "first_name" and "last_name".
        </p>
      </section>
      <section id="component-15">
        <h3>The <code>Create Visit</code> page</h3>
        <p>
          By completing the form with all the necessary data, including the
          inmate's first and last name, the user's relationship with the inmate,
          the nature of the visit, source of income, a photo, the date of the
          visit, and the time interval, the user can create a visit. Keep in
          mind that the inmate's name must be valid, the photo must be of an
          acceptable type, and the date and time interval must not overlap with
          an existing visit for the same inmate. Once all the data is valid, the
          user can submit it by pressing the "Submit" button on the bottom right
          of the page.
        </p>
        <figure type="sa:image">
          <img src="images/createvisit.png" alt="history-img" />
          <figcaption>Create visit form</figcaption>
        </figure>
        <p>
          The Create Visit endpoint facilitates the addition of new visit
          records to the database. It handles POST requests to create new visit
          entries for inmates, capturing various details such as visitor
          information, visit nature, date, and duration.
        </p>
        <ol>
          <li>
            <strong>Request Handling:</strong>
            <ul>
              <li>
                Accepts only POST requests. Other methods result in a 405 Method
                Not Allowed response.
              </li>
              <li>Validates the user's JWT token to ensure authentication.</li>
            </ul>
          </li>
          <li>
            <strong>Input Validation:</strong>
            <ul>
              <li>
                Validates the presence of all required fields in the request
                data, including the inmate's first name, last name, relationship
                with the visitor, visit nature, source of income, date, and
                visit start and end times.
              </li>
              <li>
                Checks if the provided inmate name exists in the database.
              </li>
              <li>
                Verifies the file type of the profile photo uploaded, ensuring
                it is one of the accepted image formats (JPEG, JPG, PNG).
              </li>
              <li>
                Validates the visit duration, ensuring it does not exceed the
                maximum allowable duration of 3 hours.
              </li>
              <li>Ensures that the visit start time is before the end time.</li>
            </ul>
          </li>
          <li>
            <strong>Concurrency Check:</strong>
            <ul>
              <li>
                Checks for any overlapping visits for the same inmate at the
                specified date and time range to prevent scheduling conflicts.
              </li>
            </ul>
          </li>
          <li>
            <strong>Database Operations:</strong>
            <ul>
              <li>
                Inserts the new visit record into the visits table, capturing
                details such as visitor ID, inmate name, relationship, visit
                nature, photo, source of income, date, visit start, visit end,
                and visit status.
              </li>
              <li>
                Inserts corresponding visit information into the visits_info
                table, associating the visitor ID, inmate ID, visit date, visit
                nature, and visit reference ID.
              </li>
            </ul>
          </li>
          <li>
            <strong>Response Handling:</strong>
            <ul>
              <li>
                Returns an appropriate HTTP status code and message indicating
                the success or failure of the visit creation process.
              </li>
            </ul>
          </li>
        </ol>
      </section>
      <section id="component-16">
        <h3>The <code>Active Visits</code> page</h3>
        <p>
          On this page, the user can view their scheduled active visits. If they
          no longer wish to visit the inmate, they can delete the visit. After
          the visit has been completed, the user should press the green button
          to be redirected to a page where they can provide additional
          information about how the visit went. Additionally, if the user has
          more than three visits, they can navigate through the table by
          pressing the next and previous buttons. And if the user has not active
          visits, a button labed "Create a visit" will redirect the user to the
          page to create one.
        </p>
        <figure type="sa:image">
          <img src="images/activevisits.png" alt="history-img" />
          <figcaption>Active visits table</figcaption>
        </figure>
        <p>
          The following endpoints are used for this page: Delete Visit endpoint
          and Visit endpoint.
        </p>
        <p>
          The Delete Visit endpoint allows users to remove visit records from
          the database. It handles DELETE requests and ensures that only
          authenticated users with valid JWT tokens can perform deletion
          operations.
        </p>
        <ol>
          <li>
            <strong>Request Handling:</strong>
            <ul>
              <li>
                Accepts only DELETE requests. Other methods result in a 405
                Method Not Allowed response.
              </li>
              <li>Validates the user's JWT token to ensure authentication.</li>
            </ul>
          </li>
          <li>
            <strong>Input Validation:</strong>
            <ul>
              <li>
                Checks if the required parameter visit_id is present in the
                request URL.
              </li>
              <li>
                Verifies the existence of the visit record associated with the
                provided visit_id.
              </li>
            </ul>
          </li>
          <li>
            <strong>Database Operations:</strong>
            <ul>
              <li>
                Deletes the visit record from the visits table based on the
                specified visit_id.
              </li>
              <li>
                Deletes associated visit information from the visits_info table
                using the visit_info_id obtained from the visit_refID.
              </li>
            </ul>
          </li>
          <li>
            <strong>Response Handling:</strong>
            <ul>
              <li>
                Returns appropriate HTTP status codes and messages to indicate
                the success or failure of the deletion operation.
              </li>
            </ul>
          </li>
        </ol>
        <p>
          The Visit endpoint retrieves a list of visits associated with a
          specific user ID. It handles GET requests and ensures that only
          authenticated users with valid JWT tokens can access their visit
          records.
        </p>
        <ol>
          <li>
            <strong>Request Handling:</strong>
            <ul>
              <li>
                Accepts only GET requests. Other methods result in a 405 Method
                Not Allowed response.
              </li>
              <li>Validates the user's JWT token to ensure authentication.</li>
            </ul>
          </li>
          <li>
            <strong>Input Validation:</strong>
            <ul>
              <li>
                Validates the presence of the required parameter id,
                representing the user's ID.
              </li>
            </ul>
          </li>
          <li>
            <strong>Database Query:</strong>
            <ul>
              <li>
                Executes an SQL query to retrieve visit records associated with
                the specified user ID.
              </li>
            </ul>
          </li>
          <li>
            <strong>Response Handling:</strong>
            <ul>
              <li>
                Returns a JSON array containing visit details if visits are
                found.
              </li>
              <li>Returns a 404 Not Found response if no visits are found.</li>
            </ul>
          </li>
        </ol>
      </section>
      <section id="component-17">
        <h3>The <code>Visit Info</code> page</h3>
        <p>
          The user should provide information about the visit, including items
          offered by the inmate, items provided to the inmate, a summary of
          discussions held with the inmate, the inmate's health status, and,
          optionally, any witnesses present.
        </p>
        <figure type="sa:image">
          <img src="images/visitinfo.png" alt="history-img" />
          <figcaption>Visit details form</figcaption>
        </figure>
        <p>
          The operations of this page involve the use of the Get Visit Details
          endpoint and Visit Update endpoint.
        </p>
        <p>
          The Get Visit Details endpoint retrieves detailed information about a
          specific visit based on its visit_id. It handles GET requests and
          ensures that only authenticated users with valid JWT tokens can access
          visit details.
        </p>
        <ol>
          <li>
            <strong>Request Handling:</strong>
            <ul>
              <li>
                Accepts only GET requests. Other methods result in a 405 Method
                Not Allowed response.
              </li>
              <li>Validates the user's JWT token to ensure authentication.</li>
            </ul>
          </li>
          <li>
            <strong>Input Validation:</strong>
            <ul>
              <li>
                Retrieves the visit_id parameter from the request URL and
                validates its presence.
              </li>
            </ul>
          </li>
          <li>
            <strong>Database Query:</strong>
            <ul>
              <li>
                Executes an SQL query to retrieve visit details based on the
                provided visit_id.
              </li>
            </ul>
          </li>
          <li>
            <strong>Response Handling:</strong>
            <ul>
              <li>
                Returns the visit details in JSON format if the visit exists.
              </li>
              <li>
                Returns a 404 Not Found response if the visit does not exist.
              </li>
            </ul>
          </li>
        </ol>
        <p>
          The Visit Update endpoint allows users to update visit information
          such as items offered by the inmate, items provided to the inmate,
          summary, inmate health status, and witnesses. It handles POST requests
          and ensures that only authenticated users with valid JWT tokens can
          perform visit updates.
        </p>
        <ol>
          <li>
            <strong>Request Handling:</strong>
            <ul>
              <li>
                Accepts only POST requests. Other methods result in a 405 Method
                Not Allowed response.
              </li>
              <li>Validates the user's JWT token to ensure authentication.</li>
            </ul>
          </li>
          <li>
            <strong>Input Validation:</strong>
            <ul>
              <li>
                Retrieves and processes POST data containing updated visit
                information.
              </li>
              <li>Validates and sanitizes the input data.</li>
            </ul>
          </li>
          <li>
            <strong>Database Operations:</strong>
            <ul>
              <li>
                Updates visit information in the visits_info table based on the
                provided visit_id.
              </li>
              <li>Sets the visit status to inactive in the visits table.</li>
            </ul>
          </li>
          <li>
            <strong>Response Handling:</strong>
            <ul>
              <li>
                Returns a success message if the visit is updated successfully.
              </li>
              <li>
                Returns an error message if any internal server errors occur.
              </li>
            </ul>
          </li>
        </ol>
      </section>
      <section id="component-18">
        <h3>The <code>Visit History</code> page</h3>
        <p>
          The "Visit History" page provides users with a chronological list of
          past visits, allowing them to view details about each visit by
          pressing the green button on the right of the visit.
        </p>
        <figure type="sa:image">
          <img src="images/history.png" alt="history-img" />
          <figcaption>History table</figcaption>
        </figure>
        <p>
          The History endpoint retrieves a list of inactive visit records
          associated with a specific user ID. It handles GET requests and
          ensures that only authenticated users with valid JWT tokens can access
          their visit history.
        </p>
        <ol>
          <li>
            <strong>Request Handling:</strong>
            <ul>
              <li>
                Accepts only GET requests. Other methods result in a 405 Method
                Not Allowed response.
              </li>
              <li>Validates the user's JWT token to ensure authentication.</li>
            </ul>
          </li>
          <li>
            <strong>Input Validation:</strong>
            <ul>
              <li>
                Validates the presence of the required parameter id,
                representing the user's ID.
              </li>
            </ul>
          </li>
          <li>
            <strong>Database Query:</strong>
            <ul>
              <li>
                Executes an SQL query to retrieve inactive visit records
                associated with the specified user ID from the visits table.
              </li>
            </ul>
          </li>
          <li>
            <strong>Response Handling:</strong>
            <ul>
              <li>
                Returns a JSON array containing visit details if inactive visits
                are found.
              </li>
              <li>
                Returns a 404 Not Found response if no inactive visits are
                found.
              </li>
            </ul>
          </li>
        </ol>
      </section>
      <section id="component-19">
        <h3>The <code>Visit Details</code> page</h3>
        <p>
          The page provides information about the visit, including a photo, the
          inmate's name, the date and duration of the visit, the user's
          relationship with the inmate, the source of income, any witnesses, a
          summary of the discussions, and items exchanged by both parties.
        </p>
        <figure type="sa:image">
          <img src="images/visitdetails.png" alt="history-img" />
          <figcaption>Visit data</figcaption>
        </figure>
        <p>
          The Get Inactive Visit Details endpoint retrieves detailed information
          about an inactive visit based on its visit_id. It handles GET requests
          and ensures that only authenticated users with valid JWT tokens can
          access visit details.
        </p>
        <ol>
          <li>
            <strong>Request Handling:</strong>
            <ul>
              <li>
                Accepts only GET requests. Other methods result in a 405 Method
                Not Allowed response.
              </li>
              <li>Validates the user's JWT token to ensure authentication.</li>
            </ul>
          </li>
          <li>
            <strong>Input Validation:</strong>
            <ul>
              <li>
                Retrieves the visit_id parameter from the request URL and
                validates its presence.
              </li>
            </ul>
          </li>
          <li>
            <strong>Database Query:</strong>
            <ul>
              <li>
                Executes an SQL query to retrieve detailed visit information,
                including visit details from the visits table and additional
                information from the visits_info table, for the specified
                visit_id.
              </li>
            </ul>
          </li>
          <li>
            <strong>Response Handling:</strong>
            <ul>
              <li>
                Returns the visit details in JSON format if the visit exists and
                is inactive.
              </li>
              <li>
                Returns a 404 Not Found response if the visit is not found or if
                it is active.
              </li>
            </ul>
          </li>
        </ol>
      </section>
      <section id="component-20">
        <h3>The <code>Admin Main</code> page</h3>
        <p>
          This page is exclusively for the administrator. It greets the
          administrator and provides a menu with four buttons. The first button
          redirects to the inmate management panel, the second to the user
          management page, the third to a page where the admin can view all
          registered visits, and the fourth to a section for exporting data
          about users, inmates, and visits.
        </p>
        <figure type="sa:image">
          <img src="images/adminmain.png" alt="adminmain-img" />
          <figcaption>Administrator Main Page</figcaption>
        </figure>
      </section>
      <section id="component-21">
        <h3>The <code>Inmates Panel</code> page</h3>
        <p>
          The administrator can view all the inmates added to the system, delete
          any of them, edit their information by pressing the green button, or
          add more inmates to the database by pressing the "Add Inmate" button
          in the bottom right corner of the page.
        </p>
        <figure type="sa:image">
          <img src="images/inmatespanel.png" alt="adminmain-img" />
          <figcaption>Inmates table</figcaption>
        </figure>
        <p>
          To accomplish its tasks, this page relies on the Delete Inmate
          endpoint and Get All Inmates endpoint.
        </p>
        <p>
          The Delete Inmate endpoint enables an admin user to delete an existing
          inmate from the system. It handles DELETE requests and ensures that
          only authenticated admin users with valid JWT tokens can perform
          inmate deletion.
        </p>
        <ol>
          <li>
            <strong>Request Handling:</strong>
            <ul>
              <li>
                Accepts only GET requests. Other methods result in a 405 Method
                Not Allowed response.
              </li>
              <li>
                Validates the user's JWT token to ensure admin authentication.
              </li>
            </ul>
          </li>
          <li>
            <strong>Input Validation:</strong>
            <ul>
              <li>Retrieves the inmate_id parameter from the request URL.</li>
            </ul>
          </li>
          <li>
            <strong>Database Operations:</strong>
            <ul>
              <li>Checks if the specified inmate exists in the database.</li>
              <li>
                Deletes the inmate record from the inmates table if found.
              </li>
            </ul>
          </li>
          <li>
            <strong>Response Handling:</strong>
            <ul>
              <li>
                Returns status code 200 if the inmate is deleted successfully.
              </li>
              <li>
                Returns status code 400 if the inmate_id parameter is missing.
              </li>
              <li>
                Returns status code 404 if the inmate is not found in the
                database.
              </li>
            </ul>
          </li>
        </ol>
        <p>
          The Get All Inmates endpoint retrieves a list of all inmates in the
          system. It handles GET requests and ensures that only authenticated
          admin users with valid JWT tokens can access the list of inmates.
        </p>
        <ol>
          <li>
            <strong>Request Handling:</strong>
            <ul>
              <li>
                Accepts only GET requests. Other methods result in a 405 Method
                Not Allowed response.
              </li>
              <li>
                Validates the user's JWT token to ensure admin authentication.
              </li>
            </ul>
          </li>
          <li>
            <strong>Database Operations:</strong>
            <ul>
              <li>Retrieves all inmate records from the inmates table.</li>
            </ul>
          </li>
          <li>
            <strong>Response Handling:</strong>
            <ul>
              <li>
                Returns a JSON array containing details of all inmates along
                with status code 200.
              </li>
              <li>
                Returns status code 404 if no inmates are found in the database.
              </li>
            </ul>
          </li>
        </ol>
      </section>
      <section id="component-22">
        <h3>The <code>Add Inmate</code> page</h3>
        <p>
          On this page, the administrator can add a new inmate to the database
          by providing the necessary data, including the inmate's first name,
          last name, sentence start date, sentence duration, and sentence
          category.
        </p>
        <figure type="sa:image">
          <img src="images/addinmate.png" alt="adminmain-img" />
          <figcaption>Add inmate form</figcaption>
        </figure>
        <p>
          The Add Inmate endpoint allows an admin user to add a new inmate to
          the system. It handles POST requests and ensures that only
          authenticated admin users with valid JWT tokens can add new inmates.
        </p>
        <ol>
          <li>
            <strong>Request Handling:</strong>
            <ul>
              <li>
                Accepts only POST requests. Other methods result in a 405 Method
                Not Allowed response.
              </li>
              <li>
                Validates the user's JWT token to ensure admin authentication.
              </li>
            </ul>
          </li>
          <li>
            <strong>Input Validation:</strong>
            <ul>
              <li>Retrieves input data from the POST request parameters.</li>
              <li>
                Checks if all required fields (first_name, last_name,
                sentence_start_date, sentence_duration, sentence_category) are
                provided.
              </li>
              <li>
                Checks if an inmate with the same name already exists in the
                database.
              </li>
            </ul>
          </li>
          <li>
            <strong>Database Operations:</strong>
            <ul>
              <li>
                Inserts the new inmate details into the inmates table in the
                database.
              </li>
            </ul>
          </li>
          <li>
            <strong>Response Handling:</strong>
            <ul>
              <li>
                Returns a success message with status code 200 if the inmate is
                added successfully.
              </li>
              <li>
                Returns an error message with status code 400 for missing fields
                or duplicate inmate names.
              </li>
              <li>
                Returns an error message with status code 500 for internal
                server errors during database insertion.
              </li>
            </ul>
          </li>
        </ol>
      </section>
      <section id="component-23">
        <h3>The <code>Edit Inmate</code> page</h3>
        <p>
          Similar to the Add Inmate page, the administrator can change the data
          about the inmate.
        </p>
        <figure type="sa:image">
          <img src="images/editinmate.png" alt="adminmain-img" />
          <figcaption>Edit Inmate form</figcaption>
        </figure>
        <p>
          This page functions by utilizing the Get Inmate Details endpoint and
          Update Inmate endpoint.
        </p>
        <p>
          The Get Inmate Details retrieves detailed information about a specific
          inmate based on their inmate_id. It handles GET requests and ensures
          that only authenticated admin users with valid JWT tokens can access
          inmate details.
        </p>
        <ol>
          <li>
            <strong>Request Handling:</strong>
            <ul>
              <li>
                Accepts only GET requests. Other methods result in a 405 Method
                Not Allowed response.
              </li>
              <li>
                Validates the user's JWT token to ensure admin authentication.
              </li>
            </ul>
          </li>
          <li>
            <strong>Input Validation:</strong>
            <ul>
              <li>Retrieves the inmate_id parameter from the request URL.</li>
            </ul>
          </li>
          <li>
            <strong>Database Operations:</strong>
            <ul>
              <li>
                Retrieves the inmate details from the inmates table based on the
                specified inmate_id.
              </li>
            </ul>
          </li>
          <li>
            <strong>Response Handling:</strong>
            <ul>
              <li>
                Returns inmate details in JSON format if found, along with
                status code 200.
              </li>
              <li>
                Returns status code 404 if the inmate with the specified
                inmate_id is not found.
              </li>
            </ul>
          </li>
        </ol>

        <p>
          The Update Inmate allows an admin user to update the details of an
          existing inmate. It handles PUT requests and ensures that only
          authenticated admin users with valid JWT tokens can update inmate
          information.
        </p>
        <ol>
          <li>
            <strong>Request Handling:</strong>
            <ul>
              <li>
                Accepts only PUT requests. Other methods result in a 405 Method
                Not Allowed response.
              </li>
              <li>
                Validates the user's JWT token to ensure admin authentication.
              </li>
            </ul>
          </li>
          <li>
            <strong>Input Validation:</strong>
            <ul>
              <li>Retrieves input data from the PUT request body.</li>
              <li>
                Checks if all required fields (first_name, last_name,
                sentence_start_date, sentence_duration, sentence_category) are
                provided.
              </li>
              <li>
                Verifies if the specified inmate_id exists in the database.
              </li>
            </ul>
          </li>
          <li>
            <strong>Database Operations:</strong>
            <ul>
              <li>Updates the inmate details in the inmates table.</li>
            </ul>
          </li>
          <li>
            <strong>Response Handling:</strong>
            <ul>
              <li>
                Returns a success message with status code 200 if the inmate is
                updated successfully.
              </li>
              <li>
                Returns an error message with status code 400 for missing fields
                or invalid inmate_id.
              </li>
              <li>
                Returns an error message with status code 404 if the inmate is
                not found in the database.
              </li>
              <li>
                Returns an error message with status code 500 for internal
                server errors during database update.
              </li>
            </ul>
          </li>
        </ol>
      </section>
      <section id="component-24">
        <h3>The <code>Users Panel</code> page</h3>
        <p>
          Through this page, the admin can view all user accounts created on the
          platform. The admin can delete any account by pressing the red button
          next to it or edit the account by pressing the green button.
        </p>
        <figure type="sa:image">
          <img src="images/userspanel.png" alt="adminmain-img" />
          <figcaption>Users table</figcaption>
        </figure>
        <p>
          Within this page's operations, we employ both the Delete User endpoint
          and the Get Non-Admin Users endpoint.
        </p>
        <p>
          The Delete User enables an admin user to delete an existing user from
          the system. It handles DELETE requests and ensures that only
          authenticated admin users with valid JWT tokens can perform user
          deletion.
        </p>
        <ol>
          <li>
            <strong>Request Handling:</strong>
            <ul>
              <li>
                Accepts only DELETE requests. Other methods result in a 405
                Method Not Allowed response.
              </li>
              <li>
                Validates the user's JWT token to ensure admin authentication.
              </li>
            </ul>
          </li>
          <li>
            <strong>Input Validation:</strong>
            <ul>
              <li>Retrieves the user_id parameter from the request URL.</li>
            </ul>
          </li>
          <li>
            <strong>Database Operations:</strong>
            <ul>
              <li>Checks if the specified user exists in the database.</li>
              <li>Deletes the user record from the users table if found.</li>
            </ul>
          </li>
          <li>
            <strong>Response Handling:</strong>
            <ul>
              <li>
                Returns status code 200 if the user is deleted successfully.
              </li>
              <li>
                Returns status code 400 if the user_id parameter is missing.
              </li>
              <li>
                Returns status code 404 if the user is not found in the
                database.
              </li>
            </ul>
          </li>
        </ol>

        <p>
          The Get Non-Admin Users endpoint retrieves a list of all non-admin
          users in the system. It handles GET requests and ensures that only
          authenticated admin users with valid JWT tokens can access the list of
          non-admin users.
        </p>
        <ol>
          <li>
            <strong>Request Handling:</strong>
            <ul>
              <li>
                Accepts only GET requests. Other methods result in a 405 Method
                Not Allowed response.
              </li>
              <li>
                Validates the user's JWT token to ensure admin authentication.
              </li>
            </ul>
          </li>
          <li>
            <strong>Database Operations:</strong>
            <ul>
              <li>
                Retrieves all non-admin user records from the users table.
              </li>
            </ul>
          </li>
          <li>
            <strong>Response Handling:</strong>
            <ul>
              <li>
                Returns a JSON array containing details of all non-admin users
                along with status code 200.
              </li>
              <li>
                Returns status code 404 if no non-admin users are found in the
                database.
              </li>
            </ul>
          </li>
        </ol>
      </section>
      <section id="component-25">
        <h3>The <code>Edit User</code> page</h3>
        <p>
          On this page, the administrator can change user account data such as
          first and last name, email, photo, and password. However, they cannot
          change the user's role because they are only a regular user
          themselves.
        </p>
        <figure type="sa:image">
          <img src="images/edituser.png" alt="adminmain-img" />
          <figcaption>Edit user form</figcaption>
        </figure>
        <p>
          Within this page's operations, we employ both the Get User endpoint
          and the Update User endpoint.
        </p>

        <p>
          The Get User retrieves detailed information about a specific user
          based on their user_id. It handles GET requests and ensures that only
          authenticated admin users with valid JWT tokens can access user
          details.
        </p>
        <ol>
          <li>
            <strong>Request Handling:</strong>
            <ul>
              <li>
                Accepts only GET requests. Other methods result in a 405 Method
                Not Allowed response.
              </li>
              <li>
                Validates the user's JWT token to ensure admin authentication.
              </li>
            </ul>
          </li>
          <li>
            <strong>Input Validation:</strong>
            <ul>
              <li>Retrieves the user_id parameter from the request URL.</li>
            </ul>
          </li>
          <li>
            <strong>Database Operations:</strong>
            <ul>
              <li>
                Retrieves the user details from the users table based on the
                specified user_id.
              </li>
            </ul>
          </li>
          <li>
            <strong>Response Handling:</strong>
            <ul>
              <li>
                Returns user details in JSON format if found, along with status
                code 200.
              </li>
              <li>
                Returns status code 404 if the user with the specified user_id
                is not found.
              </li>
            </ul>
          </li>
        </ol>

        <p>
          The Update User allows an admin user to update the details of an
          existing user. It handles POST requests and ensures that only
          authenticated admin users with valid JWT tokens can update user
          information.
        </p>
        <ol>
          <li>
            <strong>Request Handling:</strong>
            <ul>
              <li>
                Accepts only POST requests. Other methods result in a 405 Method
                Not Allowed response.
              </li>
              <li>
                Validates the user's JWT token to ensure admin authentication.
              </li>
            </ul>
          </li>
          <li>
            <strong>Input Validation:</strong>
            <ul>
              <li>Retrieves input data from the POST request parameters.</li>
              <li>
                Checks if all required fields (user_id, first_name, last_name,
                email) are provided.
              </li>
              <li>
                Validates the provided password strength and checks if new
                passwords match if provided.
              </li>
            </ul>
          </li>
          <li>
            <strong>File Upload Handling:</strong>
            <ul>
              <li>
                Processes photo uploads, validates file types, and updates the
                user's photo in the database if provided.
              </li>
            </ul>
          </li>
          <li>
            <strong>Database Operations:</strong>
            <ul>
              <li>Updates the user details in the users table.</li>
              <li>
                Hashes and updates the password if a new password is provided.
              </li>
            </ul>
          </li>
          <li>
            <strong>Response Handling:</strong>
            <ul>
              <li>
                Returns a success message with status code 200 if the user is
                updated successfully.
              </li>
              <li>
                Returns an error message with status code 400 for missing
                fields, invalid user_id, or password mismatch.
              </li>
              <li>
                Returns status code 404 if the user with the specified user_id
                is not found.
              </li>
              <li>
                Returns status code 500 for internal server errors during
                database update.
              </li>
            </ul>
          </li>
        </ol>
      </section>
      <section id="component-26">
        <h3>The <code>Visits Panel</code> page</h3>
        <p>
          The administrator can view all visits in the database. They can delete
          any visit by pressing the red button next to it or edit the visit by
          pressing the green button.
        </p>
        <figure type="sa:image">
          <img src="images/visitspanel.png" alt="adminmain-img" />
          <figcaption>Visits table</figcaption>
        </figure>
        <p>
          To accomplish its tasks, this page relies on the Delete Visit endpoint
          and Visits endpoint.
        </p>

        <p>
          The Delete Visit enables an admin user to delete an existing visit
          from the system. It handles DELETE requests and ensures that only
          authenticated admin users with valid JWT tokens can perform visit
          deletion.
        </p>
        <ol>
          <li>
            <strong>Request Handling:</strong>
            <ul>
              <li>
                Accepts only DELETE requests. Other methods result in a 405
                Method Not Allowed response.
              </li>
              <li>
                Validates the user's JWT token to ensure admin authentication.
              </li>
            </ul>
          </li>
          <li>
            <strong>Input Validation:</strong>
            <ul>
              <li>Retrieves the visit_id parameter from the request URL.</li>
            </ul>
          </li>
          <li>
            <strong>Database Operations:</strong>
            <ul>
              <li>Checks if the specified visit exists in the database.</li>
              <li>Deletes the visit record from the visits table if found.</li>
              <li>
                Deletes related information from the visits_info table using the
                visit_info_id associated with the visit.
              </li>
            </ul>
          </li>
          <li>
            <strong>Response Handling:</strong>
            <ul>
              <li>
                Returns status code 200 if the visit is deleted successfully.
              </li>
              <li>
                Returns status code 400 if the visit_id parameter is missing.
              </li>
              <li>
                Returns status code 404 if the visit is not found in the
                database.
              </li>
            </ul>
          </li>
        </ol>

        <p>
          The Visits endpoint retrieves a list of visits along with their
          details from the system. It handles GET requests and ensures that only
          authenticated admin users with valid JWT tokens can access visit
          information.
        </p>
        <ol>
          <li>
            <strong>Request Handling:</strong>
            <ul>
              <li>
                Accepts only GET requests. Other methods result in a 405 Method
                Not Allowed response.
              </li>
              <li>
                Validates the user's JWT token to ensure admin authentication.
              </li>
            </ul>
          </li>
          <li>
            <strong>Database Operations:</strong>
            <ul>
              <li>
                Retrieves visit details such as visit_id, photo, first_name,
                last_name, date, visit_start, and visit_end from the visits
                table.
              </li>
              <li>
                Encodes the photo data to base64 format for inclusion in the
                response.
              </li>
            </ul>
          </li>
          <li>
            <strong>Response Handling:</strong>
            <ul>
              <li>
                Returns a JSON array containing details of all visits, including
                inmate name, date, time interval, visit_id, and encoded photo.
              </li>
              <li>
                Returns status code 200 if visits are found and returned
                successfully.
              </li>
              <li>
                Returns status code 404 if no visits are found in the database.
              </li>
            </ul>
          </li>
        </ol>
      </section>
      <section id="component-27">
        <h3>The <code>Edit Visit</code> page</h3>
        <p>
          The main feature of this page is that the administrator can only
          change the date, time interval, and nature of the visit. All other
          data are displayed but cannot be modified.
        </p>
        <figure type="sa:image">
          <img src="images/editvisit.png" alt="adminmain-img" />
          <figcaption>Edit visit form</figcaption>
        </figure>
        <p>
          This page functions by utilizing the Visit Details endpoint and Update
          Visit endpoint.
        </p>

        <p>
          The Visit Details retrieves detailed information about a specific
          visit based on its visit_id. It handles GET requests and ensures that
          only authenticated admin users with valid JWT tokens can access visit
          details.
        </p>
        <ol>
          <li>
            <strong>Request Handling:</strong>
            <ul>
              <li>
                Accepts only GET requests. Other methods result in a 405 Method
                Not Allowed response.
              </li>
              <li>
                Validates the user's JWT token to ensure admin authentication.
              </li>
            </ul>
          </li>
          <li>
            <strong>Input Validation:</strong>
            <ul>
              <li>
                Validates the presence of the visit_id parameter in the request
                URL.
              </li>
            </ul>
          </li>
          <li>
            <strong>Database Operations:</strong>
            <ul>
              <li>
                Retrieves detailed information about the visit from the visits
                table.
              </li>
              <li>
                Joins data from the users table to get details about the person
                associated with the visit.
              </li>
              <li>
                Uses a LEFT JOIN with the visits_info table to include
                additional visit information if available.
              </li>
            </ul>
          </li>
          <li>
            <strong>Response Handling:</strong>
            <ul>
              <li>
                Returns detailed information about the visit in JSON format if
                found, along with status code 200.
              </li>
              <li>
                Returns status code 404 if the visit with the specified visit_id
                is not found in the database.
              </li>
            </ul>
          </li>
        </ol>

        <p>
          The Update Visit allows an admin user to modify the details of an
          existing visit in the system. It handles POST requests and ensures
          that only authenticated admin users with valid JWT tokens can update
          visit information.
        </p>
        <ol>
          <li>
            <strong>Request Handling:</strong>
            <ul>
              <li>
                Accepts only POST requests. Other methods result in a 405 Method
                Not Allowed response.
              </li>
              <li>
                Validates the user's JWT token to ensure admin authentication.
              </li>
            </ul>
          </li>
          <li>
            <strong>Input Validation:</strong>
            <ul>
              <li>
                Retrieves input data from the POST request parameters, including
                visit_id, date, visit_time_start, visit_time_end, visit_nature,
                inmate_first_name, and inmate_last_name.
              </li>
              <li>
                Checks if all required fields are provided. If any required
                field is missing, it returns a 400 Bad Request error.
              </li>
              <li>
                Validates the duration of the visit to ensure it does not exceed
                the maximum allowed duration.
              </li>
              <li>Checks if the start time is before the end time.</li>
              <li>
                Ensures that the inmate does not have another visit scheduled in
                the same time interval.
              </li>
            </ul>
          </li>
          <li>
            <strong>Database Operations:</strong>
            <ul>
              <li>Checks if the specified visit exists in the database.</li>
              <li>
                Updates the visit details in the visits table, including
                visit_nature, date, visit_start, and visit_end.
              </li>
              <li>
                Updates the corresponding visit details in the visits_info
                table, including visit_nature and visit_date.
              </li>
            </ul>
          </li>
          <li>
            <strong>Response Handling:</strong>
            <ul>
              <li>
                Returns a success message with status code 200 if the visit is
                updated successfully.
              </li>
              <li>
                Returns an error message with status code 400 for missing fields
                or invalid input data.
              </li>
              <li>
                Returns status code 404 if the specified visit is not found in
                the database.
              </li>
              <li>
                Returns status code 500 for internal server errors during the
                update process.
              </li>
            </ul>
          </li>
        </ol>
      </section>
      <section id="component-28">
        <h3>The <code>Export data</code> page</h3>
        <p>
          This page provides the export functionality for data related to
          inmates, users, and visits. The administrator can choose to export the
          data as JSON, CSV, or HTML. For inmates, the data can be sorted by
          name, sentence date, or sentence duration. For users, sorting is
          available by name, and for visits, sorting can be done by date,
          visitor, or inmate. Additionally, the export function for visits
          includes some general statistics.
        </p>
        <figure type="sa:image">
          <img src="images/export.png" alt="adminmain-img" />
          <figcaption>Export data panel</figcaption>
        </figure>
        <p>
          The Export endpoint facilitates exporting various data sets from the
          system in different formats (JSON, CSV, HTML). It handles GET requests
          and ensures that only authenticated admin users with valid JWT tokens
          can access the export functionality.
        </p>
        <ol>
          <li>
            <strong>Request Handling:</strong>
            <ul>
              <li>
                Accepts only GET requests. Other methods result in a 405 Method
                Not Allowed response.
              </li>
              <li>
                Validates the user's JWT token to ensure admin authentication.
              </li>
            </ul>
          </li>
          <li>
            <strong>Data Exporting:</strong>
            <ul>
              <li>
                Parses query parameters to determine the export type, format,
                and sorting preference.
              </li>
              <li>
                Retrieves data from the database based on the export type
                (users, inmates, all_visits).
              </li>
              <li>
                Calculates statistics related to the exported data, such as
                total counts and averages.
              </li>
              <li>
                Sorts the exported data based on the specified sorting
                preference (if provided).
              </li>
            </ul>
          </li>
          <li>
            <strong>Data Formatting:</strong>
            <ul>
              <li>Supports exporting data in JSON, CSV, and HTML formats.</li>
              <li>
                Converts the exported data and statistics into the selected
                format.
              </li>
              <li>
                Sends the formatted data as a downloadable file with appropriate
                headers.
              </li>
            </ul>
          </li>
          <li>
            <strong>Sorting:</strong>
            <ul>
              <li>
                Provides custom sorting functions for different export types and
                sorting preferences.
              </li>
            </ul>
          </li>
          <li>
            <strong>Response Handling:</strong>
            <ul>
              <li>
                Sends appropriate error responses (status code and message) for
                invalid requests or scenarios.
              </li>
            </ul>
          </li>
        </ol>
      </section>
    </section>
    <section id="semantics">
      <h2>Actions</h2>
      <p>
        The primary actors engaged with the web application include users and
        the administrators.
      </p>
      <p>
        As a user, you will have the capability to perform the following
        actions:
      </p>
      <ul>
        <li>
          The user will be able to schedule a visit by logging into an existing
          account. Upon successful login, the user will be prompted with a menu
          to either create a visit, provide information about an active visit,
          or view their visit history.
        </li>
        <li>
          A user will have the capability to access the page dedicated to
          general information about the prison and also the page about the
          functionalities of the application.
        </li>
        <li>
          The user can view their profile and update information such as name,
          email, or photo. They can also change their password. Additionally, if
          the user is logged in or not, they can provide feedback or request
          information through the contact page.
        </li>
      </ul>
      <p>
        The administrator assumes the role of the second main actor. They are
        depicted through the following actions:
      </p>
      <ul>
        <li>
          The administrator actor shares all actions of a user actor, except for
          creating a visit, providing details about the visit and viewing the
          history of their own visits.
        </li>
        <li>
          Additional actions for the administrator would include the ability to
          delete or edit user-related information, manage information about
          inmates (adding, deleting, or editing), delete or edit data about the
          visits and potentially download data based on various criteria related
          to inmates, users and visits.
        </li>
      </ul>
    </section>
    <section id="scholarly-article">
      <h2>Technologies</h2>
      <p>
        For this project, we used the following technologies: HTML, BEM, SASS,
        and a RESTful API.
      </p>
      <ul>
        <li>
          <p>
            Initially, HTML (HyperText Markup Language) played a pivotal role as
            it provided a framework for incorporating elements onto the webpage,
            including titles, paragraphs, images, etc. Additionally, we
            maintained a structured HTML format, emphasizing the importance of
            the three fundamental tags: <code>html</code>, <code>body</code>,
            and <code>head</code>. To further enhance clarity and coherence, we
            employed semantic tags such as <code>main</code>,
            <code>section</code>, <code>nav</code>, and others.
          </p>
        </li>
        <li>
          <p>
            Secondly, we implemented the BEM (Block Element Modifier)
            methodology, which enabled us to assign distinctive names to element
            classes. This approach ensured that we avoided conflicts arising
            from CSS class names throughout the project. Furthermore, by
            employing concise names, we established a stronger linkage between
            the HTML and CSS code.
          </p>
        </li>
        <li>
          <p>
            Thirdly, the implementation of Sass proved instrumental in
            optimizing our CSS code generation process. By harnessing Sass, we
            streamlined organization, minimized code redundancy, and harnessed
            advanced features such as mixin functions and variables to further
            enhance efficiency.
          </p>
        </li>
        <li>
          <p>
            Lastly, we integrated a RESTful API to handle data exchange between
            the client and the server. This API facilitated CRUD operations,
            allowing us to create, read, update, and delete data efficiently. By
            adhering to REST principles, we ensured a stateless, scalable, and
            modular approach to backend communication.
          </p>
        </li>
      </ul>
    </section>
    <section typeof="sa:Conclusion" id="conclusion" role="doc-conclusion">
      <h2>Conclusion</h2>
      <p>
        In conclusion, DeAd (Detention Administration) is a meticulously
        designed web application aimed at simplifying the management of
        visitation schedules for incarcerated individuals. Through a
        user-friendly and simple interface, DeAd ensures precise record-keeping.
        Leveraging HTML, BEM, SASS and RESTful API technologies, the project
        exemplifies structured development methodologies. With its emphasis on
        efficiency and reliability, DeAd stands as a significant advancement in
        prison visitation management, benefiting staff, inmates, and visitors
        alike.
      </p>
    </section>
    <section id="acks">
      <h2>References</h2>
      <ul>
        <li>
          <a href="https://tehnologii-web.vercel.app/">Laboratory Page</a>
        </li>
        <li>
          <a href="https://edu.info.uaic.ro/web-technologies/">Course Page</a>
        </li>
      </ul>
    </section>
  </body>
</html>
